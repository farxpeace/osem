<?php $this->load->view('includes/dashlite_header'); ?><?php $this->load->view('admin_users/admin_view_user_detail/navbar'); ?><style>    .sweetalert_confirm_submit_ol {        font-size: 14px !important;    }    .sweetalert_confirm_submit_ol li {        margin-bottom: 8px    }</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.0/css/intlTelInput.css"><style>    .iti-flag {background-image: url("https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.0/img/flags.png");}    @media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx) {        .iti-flag {background-image: url("https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.0/img/flags@2x.png");}    }    .intl-tel-input {        width: 100% !important;    }</style><div class="row">    <div class="col-12 col-md-6">        <div class="card card-bordered">            <div class="card-inner border-bottom">                <div class="card-title-group">                    <div class="card-title">                        <h6 class="title">User Detail</h6>                    </div>                </div>            </div>            <div class="card-inner border-bottom">                <div class="row mb-3 form-group">                    <label  class="col-3 col-form-label">Username</label>                    <div class="col-9">                        <div class="input-group">                            <input type="text" class="form-control" value="<?php echo $user_detail['uacc_username']; ?>" disabled>                            <div class="input-group-append">                                <button class="btn btn-outline-primary btn-dim btn_copy_clipboard"><i class="fa-regular fa-copy"></i></button>                            </div>                        </div>                    </div>                </div>                <div class="row mb-3 form-group">                    <label  class="col-3 col-form-label">Fullname</label>                    <div class="col-9">                        <div class="input-group">                            <input type="text" class="form-control editable" id="fullname" value="<?php echo $user_profile['fullname']; ?>" required>                            <div class="input-group-append">                                <button class="btn btn-outline-primary btn-dim btn_copy_clipboard"><i class="fa-regular fa-copy"></i></button>                            </div>                        </div>                    </div>                </div>                <div class="row mb-3 form-group">                    <label  class="col-3 col-form-label">Email</label>                    <div class="col-9">                        <div class="input-group">                            <input type="text" class="form-control editable" id="uacc_email" value="<?php echo $user_detail['uacc_email']; ?>" required>                            <div class="input-group-append">                                <button class="btn btn-outline-primary btn-dim btn_copy_clipboard"><i class="fa-regular fa-copy"></i></button>                            </div>                        </div>                    </div>                </div>                <div class="row mb-3 form-group">                    <label  class="col-3 col-form-label">Mobile Number</label>                    <div class="col-9">                        <div class="input-group">                            <input type="text" class="form-control editable" id="mobile_number" value="<?php echo $user_profile['mobile_number']; ?>" required>                        </div>                    </div>                </div>                <div class="row mb-3 form-group">                    <label  class="col-3 col-form-label">Registration Date</label>                    <div class="col-9">                        <div class="input-group">                            <input type="text" class="form-control" value="<?php echo $user_detail['uacc_date_added']; ?>" disabled>                            <div class="input-group-append">                                <button class="btn btn-outline-primary btn-dim btn_copy_clipboard"><i class="fa-regular fa-copy"></i></button>                            </div>                        </div>                    </div>                </div>            </div>            <div class="card-inner">                <a href="javascript: void(0);" onclick="javascript: admin_edit_user_detail();" class="btn btn-primary pull-right">Save <i class="fa-regular fa-paper-plane"></i></a>            </div>        </div>    </div>    <div class="col-12 col-md-6">        <div class="card card-bordered">            <div class="card-inner border-bottom">                <div class="card-title-group">                    <div class="card-title">                        <h6 class="title">Change Password</h6>                    </div>                </div>            </div>            <div class="card-inner border-bottom">                <div class="row mb-3 form-group">                    <label  class="col-3 col-form-label">New Password</label>                    <div class="col-9">                        <div class="input-group">                            <input type="text" class="form-control" id="new_password">                            <div class="input-group-append">                                <button class="btn btn-outline-primary btn-dim btn_copy_clipboard"><i class="fa-regular fa-copy"></i></button>                            </div>                        </div>                    </div>                </div>            </div>            <div class="card-inner">                <a href="javascript: void(0);" onclick="javascript: admin_update_password();" class="btn btn-primary pull-right">Update Password <i class="fa-regular fa-paper-plane"></i></a>            </div>        </div>    </div></div><pre><?php //print_r($user_detail); ?></pre><?php $this->load->view('includes/dashlite_footer'); ?><script src="//cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.0/js/intlTelInput.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.1.0/js/utils.js"></script><script>    $(function(){        $('#choose_new_linked_uacc_id').select2();        $('#fullname').keyup(function(){            this.value = this.value.toUpperCase();        });        $('#uacc_email').keyup(function(){            this.value = this.value.toLowerCase();        });        $("#mobile_number").intlTelInput({            onlyCountries: [                "my",                "sg"            ],            preferredCountries: [                "my",            ],            separateDialCode: true        });    })</script><script type="text/javascript">    function delete_user(){        var html_content = "Confirm delete this user ?";        SwalDompet.fire({            title: 'Are you sure?',            html: html_content,            icon: 'warning',            showCancelButton: true,            confirmButtonText: 'Confirm',            showLoaderOnConfirm: true        }).then((result) => {            if (result.isConfirmed) {                blockUI();                $.ajax({                    url: '<?php echo base_url(); ?>admin_users/ajax_admin_delete_user/',                    type: 'POST',                    dataType: 'json',                    data: {                        postdata: {                            uacc_id: '<?php echo $user_detail['uacc_id'] ?>',                        }                    },                    success: function(data){                        if(data.status == "success"){                            unblockUI();                            let timerInterval                            Swal.fire({                                title: 'Success',                                html: 'Automatically close in <b></b> milliseconds.',                                timer: 2000,                                timerProgressBar: true,                                didOpen: () => {                                    Swal.showLoading()                                    const b = Swal.getHtmlContainer().querySelector('b')                                    timerInterval = setInterval(() => {                                        b.textContent = Swal.getTimerLeft()                                    }, 100)                                },                                willClose: () => {                                    clearInterval(timerInterval)                                }                            }).then((result) => {                                /* Read more about handling dismissals below */                                if (result.dismiss === Swal.DismissReason.timer) {                                    console.log('I was closed by the timer')                                }                            })                            window.location.href = "<?php echo base_url(); ?>admin_users/admin_list_all_staff";                        }else{                            unblockUI();                            var eell = data.errors;                            $.each(eell, function(i,j){                                var el_on_page = $("#"+i).length;                                if (el_on_page){                                    $("#"+i).closest('.form-group').addClass('has-error');                                    $("#"+i).closest('.form-group').find('.error_message').text(j).show();                                } else {                                }                                SwalDompet.fire({                                    icon: 'error',                                    title: 'Oops...',                                    html: j,                                })                            });                        }                    }                });            }        })    }    function admin_update_linked_account(){        var linked_uacc_id = $("#choose_new_linked_uacc_id").val();        var html_content = "Confirm change linked account for this this user ?";        SwalDompet.fire({            title: 'Are you sure?',            html: html_content,            icon: 'info',            showCancelButton: true,            confirmButtonText: 'Confirm',            showLoaderOnConfirm: true        }).then((result) => {            if (result.isConfirmed) {                blockUI();                $.ajax({                    url: '<?php echo base_url(); ?>admin_users/ajax_admin_update_linked_account/',                    type: 'POST',                    dataType: 'json',                    data: {                        postdata: {                            uacc_id: '<?php echo $user_detail['uacc_id'] ?>',                            linked_uacc_id: linked_uacc_id                        }                    },                    success: function(data){                        if(data.status == "success"){                            unblockUI();                            let timerInterval                            Swal.fire({                                title: 'Success',                                html: 'Automatically close in <b></b> milliseconds.',                                timer: 2000,                                timerProgressBar: true,                                didOpen: () => {                                    Swal.showLoading()                                    const b = Swal.getHtmlContainer().querySelector('b')                                    timerInterval = setInterval(() => {                                        b.textContent = Swal.getTimerLeft()                                    }, 100)                                },                                willClose: () => {                                    clearInterval(timerInterval)                                }                            }).then((result) => {                                /* Read more about handling dismissals below */                                if (result.dismiss === Swal.DismissReason.timer) {                                    console.log('I was closed by the timer')                                }                            })                            window.location.reload();                        }else{                            unblockUI();                            var eell = data.errors;                            $.each(eell, function(i,j){                                var el_on_page = $("#"+i).length;                                if (el_on_page){                                    $("#"+i).closest('.form-group').addClass('has-error');                                    $("#"+i).closest('.form-group').find('.error_message').text(j).show();                                } else {                                }                                SwalDompet.fire({                                    icon: 'error',                                    title: 'Oops...',                                    html: j,                                })                            });                        }                    }                });            }        })    }</script><script>    function admin_edit_user_detail(){        var populate_date = [];        $(".editable").each(function(i, j){            var column_name = $(j).attr("id");            var column_value = $(j).val();            var push_data = {}            push_data[column_name] = column_value;            populate_date.push(push_data)        });        var html_content = "<ol class='sweetalert_confirm_submit_ol'>";        $(populate_date).each(function(i, j){            var key_name = Object.keys(j)[0];            html_content += "<li>";            html_content += key_name+" : ";            html_content += j[key_name]            html_content += "</li>";        });        html_content += "</ol>";        SwalDompet.fire({            title: 'Are you sure?',            html: html_content,            icon: 'warning',            showCancelButton: true,            confirmButtonText: 'Confirm',            showLoaderOnConfirm: true        }).then((result) => {            if (result.isConfirmed) {                blockUI();                $.ajax({                    url: '/admin_users/ajax_admin_update_user_details/',                    type: 'POST',                    dataType: 'json',                    data: {                        postdata: {                            fullname: $("#fullname").val(),                            uacc_email: $("#uacc_email").val(),                            uacc_id: '<?php echo $user_detail['uacc_id']; ?>',                            mobile_number: $("#mobile_number").intlTelInput("getNumber")                        }                    },                    success: function(data){                        if(data.status == "success"){                            unblockUI();                            let timerInterval                            Swal.fire({                                title: 'Success',                                html: 'Automatically close in <b></b> milliseconds.',                                timer: 2000,                                timerProgressBar: true,                                didOpen: () => {                                    Swal.showLoading()                                    const b = Swal.getHtmlContainer().querySelector('b')                                    timerInterval = setInterval(() => {                                        b.textContent = Swal.getTimerLeft()                                    }, 100)                                },                                willClose: () => {                                    clearInterval(timerInterval)                                }                            }).then((result) => {                                /* Read more about handling dismissals below */                                if (result.dismiss === Swal.DismissReason.timer) {                                    console.log('I was closed by the timer')                                }                            })                            //window.location.href = "https://dsnt.test/dealer/simcard_order/my_stocks";                        }else{                            unblockUI();                            var eell = data.errors;                            $.each(eell, function(i,j){                                var el_on_page = $("#"+i).length;                                if (el_on_page){                                    $("#"+i).closest('.form-group').addClass('has-error');                                    $("#"+i).closest('.form-group').find('.error_message').text(j).show();                                } else {                                }                                SwalDompet.fire({                                    icon: 'error',                                    title: 'Oops...',                                    html: j,                                })                            });                        }                    }                });            }        })        console.log(populate_date)    }</script><script>    function admin_update_password(){        SwalDompet.fire({            title: 'Are you sure?',            html: "Confirm update password ?",            icon: 'warning',            showCancelButton: true,            confirmButtonText: 'Confirm',            showLoaderOnConfirm: true        }).then((result) => {            if (result.isConfirmed) {                blockUI();                $.ajax({                    url: '/admin_users/admin_update_password/',                    type: 'POST',                    dataType: 'json',                    data: {                        postdata: {                            password: $("#new_password").val(),                            uacc_id: '<?php echo $user_detail['uacc_id']; ?>'                        }                    },                    success: function(data){                        if(data.status == "success"){                            unblockUI();                            let timerInterval                            Swal.fire({                                title: 'Success',                                html: 'Automatically close in <b></b> milliseconds.',                                timer: 2000,                                timerProgressBar: true,                                didOpen: () => {                                    Swal.showLoading()                                    const b = Swal.getHtmlContainer().querySelector('b')                                    timerInterval = setInterval(() => {                                        b.textContent = Swal.getTimerLeft()                                    }, 100)                                },                                willClose: () => {                                    clearInterval(timerInterval)                                }                            }).then((result) => {                                /* Read more about handling dismissals below */                                if (result.dismiss === Swal.DismissReason.timer) {                                    console.log('I was closed by the timer')                                }                            })                            //window.location.href = "https://dsnt.test/dealer/simcard_order/my_stocks";                        }else{                            unblockUI();                            var eell = data.errors;                            $.each(eell, function(i,j){                                var el_on_page = $("#"+i).length;                                if (el_on_page){                                    $("#"+i).closest('.form-group').addClass('has-error');                                    $("#"+i).closest('.form-group').find('.error_message').text(j).show();                                } else {                                }                                SwalDompet.fire({                                    icon: 'error',                                    title: 'Oops...',                                    html: j,                                })                            });                        }                    }                });            }        });    }</script>