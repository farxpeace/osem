<?php $this->load->view('includes/dashlite_header'); ?>    <style>        .nk-ecwg .amount {            font-size: 2rem;            font-weight: 500;            color: #364a63;        }        .nk-top-products .item{            display:flex;            align-items:center;            padding:.625rem 0;            line-height:1.2        }        .nk-top-products .thumb{            width:44px;            margin-right:1rem        }        .nk-top-products .thumb img{            border-radius:4px        }        .nk-top-products .total{            margin-left:auto;            text-align:right        }        .nk-top-products .amount,.nk-top-products .title{            font-size:.9375rem;            color:#364a63;            margin-bottom:.25rem        }        .nk-top-products .count,.nk-top-products .price{            font-size:.8125rem;            color:#8094ae;            margin-bottom:1px        }        .nk-store-statistics .item{            display:flex;            align-items:center;            justify-content:space-between;            padding:.5rem 0        }        .nk-store-statistics .title{            font-size:.8125rem;            color:#8094ae        }        .nk-store-statistics .count{            font-size:1.25rem;            color:#364a63;            font-weight:700        }        .nk-store-statistics .icon{            display:flex;            align-items:center;            justify-content:center;            font-size:1.5rem;            height:44px;            width:44px;            border-radius:6px        }        .nk-download{            display:flex;            width:100%;            flex-wrap:wrap;            align-items:center;            justify-content:space-between;            padding:1.25rem;            border-radius:4px;            background:#fff        }        .nk-download .data{            display:flex;            flex-grow:1        }        .nk-download .info{            margin-top:.35rem        }        .nk-download .title{            font-size:1rem;            line-height:1.2        }        .nk-download .thumb{            flex-shrink:0;            width:3rem;            margin-right:1rem        }        .nk-download .meta .release,.nk-download .meta .version{            display:block;            line-height:1.2;            padding:.25rem 0        }        .nk-download .title .badge{            margin-left:1rem        }        @media (min-width:768px){            .nk-download{                padding:1.5rem            }            .nk-download .thumb{                width:2.5rem;                margin-right:1.5rem            }            .nk-download .data{                align-items:center            }            .nk-download .meta .release,.nk-download .meta .version{                display:inline-block;                padding-right:1.5rem            }        }        @media (max-width:575px){            .nk-download .data{                width:100%;                padding-left:4rem            }            .nk-download .thumb{                position:absolute;                margin-left:-4rem            }            .nk-download .actions{                margin:.75rem 0 0;                padding-left:4rem            }        }    </style>    <div class="nk-block">        <?php if($this->far_dashboard->count_total_attendance_without_clockout() > 0){ ?>        <div class="row g-gs mb-3">            <div class="col-12">                <div class="alert alert-pro alert-danger">                    <div class="alert-text">                        <h6>Reminder</h6>                        <p>System detected that you have <b><?php echo $this->far_dashboard->count_total_attendance_without_clockout() ?></b> attendance without clock-out data. Click <a href="admin_attendance/datatable_admin_list_all_attendance/?filter_shift_date_type=all&start=2025-01-01&end=2030-12-31">here</a> to see all listing</p>                    </div>                </div>            </div>        </div>        <?php } ?>        <div class="row g-gs">            <div class="col-xxl-3 col-sm-6">                <div class="card">                    <div class="nk-ecwg nk-ecwg6">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Total Staff<sup>(s)</sup></h6>                                </div>                            </div>                            <div class="data">                                <div class="data-group">                                    <div class="amount"><?php echo $this->far_dashboard->total_staff(); ?></div>                                </div>                            </div>                        </div><!-- .card-inner -->                    </div><!-- .nk-ecwg -->                </div><!-- .card -->            </div><!-- .col -->            <div class="col-xxl-3 col-sm-6">                <div class="card">                    <div class="nk-ecwg nk-ecwg6">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Total Member<sup>(s)</sup></h6>                                </div>                            </div>                            <div class="data">                                <div class="data-group">                                    <div class="amount"><?php echo $this->far_dashboard->total_customer(); ?></div>                                </div>                            </div>                        </div><!-- .card-inner -->                    </div><!-- .nk-ecwg -->                </div><!-- .card -->            </div><!-- .col -->            <div class="col-xxl-3 col-sm-6">                <div class="card">                    <div class="nk-ecwg nk-ecwg6">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Total Product Type</h6>                                </div>                            </div>                            <div class="data">                                <div class="data-group">                                    <div class="amount"><?php echo $this->far_dashboard->total_product_type(); ?></div>                                </div>                            </div>                        </div><!-- .card-inner -->                    </div><!-- .nk-ecwg -->                </div><!-- .card -->            </div><!-- .col -->            <div class="col-xxl-3 col-sm-6">                <div class="card">                    <div class="nk-ecwg nk-ecwg6">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Total Stock Balance</h6>                                </div>                            </div>                            <div class="data">                                <div class="data-group">                                    <div class="amount"><?php echo $this->far_dashboard->total_stock_balance(); ?></div>                                </div>                            </div>                        </div><!-- .card-inner -->                    </div><!-- .nk-ecwg -->                </div><!-- .card -->            </div><!-- .col -->            <div class="col-xxl-3 col-sm-6">                <div class="card">                    <div class="nk-ecwg nk-ecwg6">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Month Sales <?php echo date("M Y") ?></h6>                                </div>                            </div>                            <div class="data">                                <div class="data-group">                                    <div class="amount">RM <?php echo $this->far_dashboard->total_sales_per_month(date("Y-m-01")); ?></div>                                </div>                            </div>                        </div><!-- .card-inner -->                    </div><!-- .nk-ecwg -->                </div><!-- .card -->            </div><!-- .col -->            <div class="col-xxl-3 col-sm-6">                <div class="card">                    <div class="nk-ecwg nk-ecwg6">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Today Sales <?php echo date("d/m/Y") ?></h6>                                </div>                            </div>                            <div class="data">                                <div class="data-group">                                    <div class="amount">RM <?php echo $this->far_dashboard->total_sales_per_date(date("Y-m-d")); ?></div>                                </div>                            </div>                        </div><!-- .card-inner -->                    </div><!-- .nk-ecwg -->                </div><!-- .card -->            </div><!-- .col -->            <div class="col-xxl-3 col-sm-6">                <div class="card">                    <div class="nk-ecwg nk-ecwg6">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Today Cash <?php echo date("d/m/Y") ?></h6>                                </div>                            </div>                            <div class="data">                                <div class="data-group">                                    <div class="amount">RM <?php echo $this->far_dashboard->total_sales_per_date_and_cash(date("Y-m-d")); ?></div>                                </div>                            </div>                        </div><!-- .card-inner -->                    </div><!-- .nk-ecwg -->                </div><!-- .card -->            </div><!-- .col -->            <div class="col-xxl-3 col-sm-6">                <div class="card">                    <div class="nk-ecwg nk-ecwg6">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Today eWallet <?php echo date("d/m/Y") ?></h6>                                </div>                            </div>                            <div class="data">                                <div class="data-group">                                    <div class="amount">RM <?php echo $this->far_dashboard->total_sales_per_date_and_ewallet(date("Y-m-d")); ?></div>                                </div>                            </div>                        </div><!-- .card-inner -->                    </div><!-- .nk-ecwg -->                </div><!-- .card -->            </div><!-- .col -->        </div><!-- .row -->        <div class="row g-gs mt-3">            <div class="col-12 col-md-6">                <div class="card card card-bordered card-full" id="card_monthly_pay">                    <div class="card-inner-group">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Daily Pay</h6>                                </div>                                <div class="card-tools">                                    <div class="form-group">                                        <div class="form-control-wrap">                                            <div class="input-group">                                                <div class="input-group-prepend">                                                    <div class="form-control-select">                                                        <select class="form-control" id="monthly_pay_filter_month" style="width: 160px;">                                                            <?php                                                            $start_my    = new DateTime('2024-01');                                                            $end_my      = new DateTime('2025-01');                                                            $interval = DateInterval::createFromDateString('1 month');                                                            $period   = new DatePeriod($start_my, $interval, $end_my);                                                            foreach ($period as $dt) { ?>                                                                <option value="<?php echo $dt->format("m") ?>" <?php if($monthly_pay_filter_month == $dt->format("m")){ echo 'selected=""'; } ?>><?php echo $dt->format("M") ?></option>                                                            <?php }                                                            ?>                                                        </select>                                                    </div>                                                </div>                                                <div class="form-control-select">                                                    <select class="form-control" id="monthly_pay_filter_year" style="width: 160px;">                                                        <option value="2025" <?php if($monthly_pay_filter_year == '2025'){ echo 'selected=""'; } ?>>2025</option>                                                        <option value="2026" <?php if($monthly_pay_filter_year == '2026'){ echo 'selected=""'; } ?>>2026</option>                                                        <option value="2027" <?php if($monthly_pay_filter_year == '2027'){ echo 'selected=""'; } ?>>2027</option>                                                        <option value="2028" <?php if($monthly_pay_filter_year == '2028'){ echo 'selected=""'; } ?>>2028</option>                                                        <option value="2029" <?php if($monthly_pay_filter_year == '2029'){ echo 'selected=""'; } ?>>2029</option>                                                        <option value="2030" <?php if($monthly_pay_filter_year == '2030'){ echo 'selected=""'; } ?>>2030</option>                                                    </select>                                                </div>                                            </div>                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <div class="card-inner card-inner-md">                            <div id="frame_monthly_pay"></div>                        </div>                    </div>                </div>            </div>            <div class="col-12 col-md-6">                <div class="card card card-bordered card-full" id="card_monthly_pay">                    <div class="card-inner-group">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Daily Sales</h6>                                </div>                                <div class="card-tools">                                    <div class="form-group">                                        <div class="form-control-wrap">                                            <div class="input-group">                                                <div class="input-group-prepend">                                                    <div class="form-control-select">                                                        <select class="form-control" id="monthly_sale_filter_month" style="width: 160px;">                                                            <?php                                                            $start_my    = new DateTime('2024-01');                                                            $end_my      = new DateTime('2025-01');                                                            $interval = DateInterval::createFromDateString('1 month');                                                            $period   = new DatePeriod($start_my, $interval, $end_my);                                                            foreach ($period as $dt) { ?>                                                                <option value="<?php echo $dt->format("m") ?>" <?php if($monthly_sale_filter_month == $dt->format("m")){ echo 'selected=""'; } ?>><?php echo $dt->format("M") ?></option>                                                            <?php }                                                            ?>                                                        </select>                                                    </div>                                                </div>                                                <div class="form-control-select">                                                    <select class="form-control" id="monthly_sale_filter_year" style="width: 160px;">                                                        <option value="2025" <?php if($monthly_sale_filter_year == '2025'){ echo 'selected=""'; } ?>>2025</option>                                                        <option value="2026" <?php if($monthly_sale_filter_year == '2026'){ echo 'selected=""'; } ?>>2026</option>                                                        <option value="2027" <?php if($monthly_sale_filter_year == '2027'){ echo 'selected=""'; } ?>>2027</option>                                                        <option value="2028" <?php if($monthly_sale_filter_year == '2028'){ echo 'selected=""'; } ?>>2028</option>                                                        <option value="2029" <?php if($monthly_sale_filter_year == '2029'){ echo 'selected=""'; } ?>>2029</option>                                                        <option value="2030" <?php if($monthly_sale_filter_year == '2030'){ echo 'selected=""'; } ?>>2030</option>                                                    </select>                                                </div>                                            </div>                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <div class="card-inner card-inner-md">                            <div id="frame_monthly_sale"></div>                        </div>                    </div>                </div>            </div>        </div>        <div class="row g-gs mt-3">            <div class="col-12 col-md-6">                <div class="card card card-bordered card-full" id="card_product_insight">                    <div class="card-inner-group">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Product Stock</h6>                                </div>                                <div class="card-tools">                                    <a href="/admin_product/datatable_admin_list_all_product" class="link">View All</a>                                </div>                            </div>                        </div>                        <div class="card-inner card-inner-md">                            <div class="form-group">                                <div class="form-control-wrap ">                                    <div class="form-control-select">                                        <select class="form-control" id="product_id">                                            <?php foreach($this->far_product->list_all_product() as $a => $b){ ?>                                            <option value="<?php echo $b['product_id'] ?>"><?php echo $b['product_name'] ?></option>                                            <?php } ?>                                        </select>                                    </div>                                </div>                            </div>                        </div>                        <div class="card-inner card-inner-md">                            <div id="frame_ajax_product_stock"></div>                        </div>                    </div>                </div>            </div>            <div class="col-12 col-md-6">                <div class="card card card-bordered card-full" id="card_customer_insight">                    <div class="card-inner-group">                        <div class="card-inner">                            <div class="card-title-group">                                <div class="card-title">                                    <h6 class="title">Customer</h6>                                </div>                                <div class="card-tools">                                    <a href="/admin_customer/datatable_admin_list_all_customer" class="link">View All</a>                                </div>                            </div>                        </div>                        <div class="card-inner card-inner-md">                            <div class="form-group">                                <div class="form-control-wrap ">                                    <div class="form-control-select">                                        <select class="form-control" id="customer_id">                                            <?php foreach($this->far_customer->list_all_customer_simple() as $a => $b){ ?>                                                <option value="<?php echo $b['customer_id'] ?>"><?php echo $b['fullname'] ?></option>                                            <?php } ?>                                        </select>                                    </div>                                </div>                            </div>                        </div>                        <div class="card-inner card-inner-md">                            <div id="frame_ajax_customer_detail"></div>                        </div>                    </div>                </div>            </div>        </div>        <div class="row g-gs mt-3">            <div class="col-xxl-4 col-md-6">                <div class="card h-100">                    <div class="card-inner">                        <div class="card-title-group mb-2">                            <div class="card-title">                                <h6 class="title">Order Insight</h6>                            </div>                        </div>                        <ul class="nk-store-statistics">                            <li class="item">                                <div class="info">                                    <div class="title">Total Orders</div>                                    <div class="count"><?php echo $this->far_dashboard->total_order(); ?></div>                                </div>                                <em class="icon bg-primary-dim ni ni-bag"></em>                            </li>                            <li class="item">                                <div class="info">                                    <div class="title">Total Cash</div>                                    <div class="count"><?php echo $this->far_dashboard->total_order_by_cash(); ?> <small>payment<sup>(s)</sup></small></div>                                </div>                                <em class="icon bg-info-dim ni ni-users"></em>                            </li>                            <li class="item">                                <div class="info">                                    <div class="title">Total eWallet</div>                                    <div class="count"><?php echo $this->far_dashboard->total_order_by_ewallet(); ?> <small>payment<sup>(s)</sup></small></div>                                </div>                                <em class="icon bg-pink-dim ni ni-box"></em>                            </li>                            <li class="item">                                <div class="info">                                    <div class="title">Total Sales</div>                                    <div class="count">RM <?php echo $this->far_helper->convert_number_to_price_format($this->far_dashboard->total_sales()); ?></div>                                </div>                                <em class="icon bg-purple-dim ni ni-server"></em>                            </li>                        </ul>                    </div><!-- .card-inner -->                </div><!-- .card -->            </div><!-- .col -->            <div class="col-xxl-8">                <div class="card card-full">                    <div class="card-inner">                        <div class="card-title-group">                            <div class="card-title">                                <h6 class="title">Recent Orders</h6>                            </div>                        </div>                    </div>                    <div class="nk-tb-list mt-n2">                        <div class="nk-tb-item nk-tb-head">                            <div class="nk-tb-col"><span>Order No.</span></div>                            <div class="nk-tb-col tb-col-sm"><span>Customer</span></div>                            <div class="nk-tb-col tb-col-md"><span>Date</span></div>                            <div class="nk-tb-col"><span>Amount (RM)</span></div>                            <div class="nk-tb-col"><span class="d-none d-sm-inline">Is Member</span></div>                        </div>                        <?php                        $latest_5_orders = $this->far_dashboard->latest_5_orders();                        ?>                        <?php if(count($latest_5_orders) > 0){ ?>                            <?php foreach($this->far_dashboard->latest_5_orders() as $a => $b){ ?>                            <div class="nk-tb-item">                                <div class="nk-tb-col">                                    <span class="tb-lead"><a href="#">#<?php echo $b['order_code'] ?></a></span>                                </div>                                <div class="nk-tb-col tb-col-sm">                                    <div class="user-card">                                        <div class="user-name">                                            <span class="tb-lead"><?php echo $b['fullname'] ?></span>                                        </div>                                    </div>                                </div>                                <div class="nk-tb-col tb-col-md">                                    <span class="tb-sub"><?php echo $this->far_date->convert_format($b['create_dttm'],'D, j M Y'); ?></span>                                </div>                                <div class="nk-tb-col">                                    <span class="tb-sub tb-amount"><?php echo $this->far_helper->convert_to_currency_format($b['grand_total']); ?></span>                                </div>                                <div class="nk-tb-col">                                    <?php if($b['is_member'] == "yes"){ ?>                                        ✅                                    <?php } ?>                                    <?php if($b['is_member'] == "no"){ ?>                                        ❌                                    <?php } ?>                                                                    </div>                            </div>                            <?php } ?>                        <?php } ?>                    </div>                </div><!-- .card -->            </div>        </div>    </div><!-- .nk-block --><?php $this->load->view('includes/dashlite_footer'); ?><script src="https://code.highcharts.com/highcharts.js"></script><script src="https://code.highcharts.com/modules/data.js"></script><script src="https://code.highcharts.com/modules/exporting.js"></script><script src="https://code.highcharts.com/modules/accessibility.js"></script><script>    $("#monthly_pay_filter_month, #monthly_pay_filter_year").on("change", function(){        onchange_monthly_pay();    });    onchange_monthly_pay();    function onchange_monthly_pay(){        $("#frame_monthly_pay").load('/admin_attendance/ajax_graph_monthly_pay',{            postdata: {                filter_month: $("#monthly_pay_filter_month").val(),                filter_year: $("#monthly_pay_filter_year").val()            }        }, function(){        })    }</script><script>    $("#monthly_sale_filter_month, #monthly_sale_filter_year").on("change", function(){        onchange_monthly_sale();    });    onchange_monthly_sale();    function onchange_monthly_sale(){        $("#frame_monthly_sale").load('/admin_sales/ajax_graph_monthly_sale',{            postdata: {                filter_month: $("#monthly_sale_filter_month").val(),                filter_year: $("#monthly_sale_filter_year").val()            }        }, function(){        })    }</script><script>    $(function(){        onchange_product_id();        $("#product_id").on("change", function(){            onchange_product_id();        })        onchange_customer_id();        $("#customer_id").on("change", function(){            onchange_customer_id();        })    });    function onchange_product_id(){        $('#card_product_insight').block({ message: null });        var product_id = $("#product_id").val();        $("#frame_ajax_product_stock").load('/admin_product/ajax_dashboard_product_insight', {            postdata: {                product_id: product_id            }        }, function(){            $('#card_product_insight').unblock();        })    }    function onchange_customer_id(){        $('#card_customer_insight').block({ message: null });        var customer_id = $("#customer_id").val();        $("#frame_ajax_customer_detail").load('/admin_customer/ajax_dashboard_customer_insight', {            postdata: {                customer_id: customer_id            }        }, function(){            $('#card_customer_insight').unblock();        })    }</script>